{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\lms_app\\\\src\\\\Components\\\\LMS\\\\Login\\\\LoginMain.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Login from \"./Login\";\nimport Signup from \"./SignUp\";\nimport Logout from \"./Logout\";\nimport \"../../../Styles/login.css\";\nimport axios from \"axios\";\n// import { AuthProvider } from \"../AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function LoginMain() {\n  _s();\n  const [currentView, setCurrentView] = useState(\"login\");\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  useEffect(() => {\n    sessionCurrent();\n  }, []);\n  const sessionCurrent = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:8080/user/current\", {\n        withCredentials: true\n      });\n      if (response.status === 200) {\n        setIsAuthenticated(true);\n        // AuthProvider.setIsAuthenticated(true);\n\n        setCurrentView(\"logout\");\n      }\n    } catch (error) {\n      console.log(\"Session error:\", error);\n    }\n  };\n  const handleLogin = () => {\n    setCurrentView(\"login\");\n  };\n  const handleSignup = () => {\n    setCurrentView(\"signup\");\n  };\n\n  // 240909 socket 관련 추가\n  // const socket = useWebSocket();\n\n  const handleLogout = async () => {\n    try {\n      const response = await axios.post(\"http://localhost:8080/user/logout\", {}, {\n        withCredentials: true\n      });\n      if (response.status === 200) {\n        setIsAuthenticated(false);\n        // AuthProvider.setIsAuthenticated(false);\n\n        setCurrentView(\"login\");\n        // window.location.href = \"main.html\";\n        window.location.href = \"login\";\n      }\n    } catch (error) {\n      console.log(\"Logout error:\", error);\n    }\n  };\n  const handleSignupSuccess = () => {\n    setCurrentView(\"login\");\n  };\n  const handleConnect = () => {\n    // window.location.href = \"main.html\";\n    window.location.href = \"index\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"LoginMain\",\n    children: [currentView === \"login\" && /*#__PURE__*/_jsxDEV(Login, {\n      onSignup: handleSignup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 41\n    }, this), currentView === \"signup\" && /*#__PURE__*/_jsxDEV(Signup, {\n      onSuccess: handleSignupSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }, this), currentView === \"logout\" && /*#__PURE__*/_jsxDEV(Logout, {\n      onLogout: handleLogout,\n      onConnect: handleConnect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_s(LoginMain, \"Lbcx5tdEnrW66K8RHNRpq47ldfY=\");\n_c = LoginMain;\nexport default LoginMain;\nvar _c;\n$RefreshReg$(_c, \"LoginMain\");","map":{"version":3,"names":["React","useState","useEffect","Login","Signup","Logout","axios","jsxDEV","_jsxDEV","LoginMain","_s","currentView","setCurrentView","isAuthenticated","setIsAuthenticated","sessionCurrent","response","get","withCredentials","status","error","console","log","handleLogin","handleSignup","handleLogout","post","window","location","href","handleSignupSuccess","handleConnect","className","children","onSignup","fileName","_jsxFileName","lineNumber","columnNumber","onSuccess","onLogout","onConnect","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/GitHub/lms_app/src/Components/LMS/Login/LoginMain.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Login from \"./Login\";\nimport Signup from \"./SignUp\";\nimport Logout from \"./Logout\";\nimport \"../../../Styles/login.css\";\nimport axios from \"axios\";\n// import { AuthProvider } from \"../AuthContext\";\n\nexport function LoginMain() {\n    const [currentView, setCurrentView] = useState(\"login\");\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n    useEffect(() => {\n        sessionCurrent();\n    }, []);\n\n    const sessionCurrent = async () => {\n        try {\n            const response = await axios.get(\n                \"http://localhost:8080/user/current\",\n                { withCredentials: true }\n            );\n            if (response.status === 200) {\n                setIsAuthenticated(true);\n                // AuthProvider.setIsAuthenticated(true);\n\n                setCurrentView(\"logout\");\n            }\n        } catch (error) {\n            console.log(\"Session error:\", error);\n        }\n    };\n\n    const handleLogin = () => {\n        setCurrentView(\"login\");\n    };\n\n    const handleSignup = () => {\n        setCurrentView(\"signup\");\n    };\n\n    // 240909 socket 관련 추가\n    // const socket = useWebSocket();\n\n    const handleLogout = async () => {\n        try {\n            const response = await axios.post(\n                \"http://localhost:8080/user/logout\",\n                {},\n                { withCredentials: true }\n            );\n            if (response.status === 200) {\n                setIsAuthenticated(false);\n                // AuthProvider.setIsAuthenticated(false);\n\n                setCurrentView(\"login\");\n                // window.location.href = \"main.html\";\n                window.location.href = \"login\";\n            }\n        } catch (error) {\n            console.log(\"Logout error:\", error);\n        }\n    };\n\n    const handleSignupSuccess = () => {\n        setCurrentView(\"login\");\n    };\n\n    const handleConnect = () => {\n        // window.location.href = \"main.html\";\n        window.location.href = \"index\";\n    };\n\n    return (\n        <div className=\"LoginMain\">\n            {currentView === \"login\" && <Login onSignup={handleSignup} />}\n            {currentView === \"signup\" && (\n                <Signup onSuccess={handleSignupSuccess} />\n            )}\n            {currentView === \"logout\" && (\n                <Logout onLogout={handleLogout} onConnect={handleConnect} />\n            )}\n        </div>\n    );\n}\n\nexport default LoginMain;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}